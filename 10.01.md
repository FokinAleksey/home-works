# Домашнее задание к занятию 10.1 «Keepalived/vrrp» - Алексей Фокин


### Задание 1

Разверните топологию из лекции и выполните установку и настройку сервиса Keepalived.

*Пришлите скриншот рабочей конфигурации и состояния сервиса для каждого нода.*

*Первая нода keepalived*        
```
vrrp_instance test {
state MASTER
interface enp0s8
virtual_router_id 10
priority 110
advert_int 4
authentication {
auth_type AH
auth_pass 12345
}
unicast_peer {
192.168.123.2
}
virtual_ipaddress {
192.168.123.250 dev enp0s8 label enp0s8:vip
}
}
```
*Вторая нода keepalived*
```
vrrp_instance test {
state BACKUP
interface enp0s8
virtual_router_id 10
priority 90
advert_int 4
authentication {
auth_type AH
auth_pass 12345
}
unicast_peer {
192.168.123.3
}
virtual_ipaddress {
192.168.123.250 dev enp0s8 label enp0s8:vip
}
}
```
![ ](image10.01\1.png)

## Дополнительные задания со звёздочкой*

Эти задания дополнительные. Их можно не выполнять. На зачёт это не повлияет. Вы можете их выполнить, если хотите глубже разобраться в материале.
 
### Задание 2*

Проведите тестирование работы ноды, когда один из интерфейсов выключен. Для этого:
- добавьте ещё одну виртуальную машину и включите её в сеть;
- на машине установите Wireshark и запустите процесс прослеживания интерфейса;
- запустите процесс ping на виртуальный хост;
- выключите интерфейс на одной ноде (мастер), остановите Wireshark;
- найдите пакеты ICMP, в которых будет отображён процесс изменения MAC-адреса одной ноды на другой. 

 *Пришлите скриншот до и после выключения интерфейса из Wireshark.*
 ___

- c 3-ей vm запускаем ping на виртуальный хост
```
ping 192.168.123.250
```
- на 3-ей vm запускаем Wireshark для захвата пакетов icmp с интерфейса eth1

- отключаем интерфейс enp0s8 на MASTER node 
```
sudo ip link set enp0s8 down
```
*момент отключения интерфейса на MASTER ноде и MAC-адрес MASTER ноды*
![ ](image10.01\2.png)

*момент возобновления пересылки пакетов на BACKUP ноду и MAC-адрес BACKUP ноды*
![ ](image10.01\3.png)
